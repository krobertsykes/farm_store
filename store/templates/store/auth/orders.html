{% extends "store/base.html" %}
{% block content %}
<h1 class="text-2xl font-bold mb-4">Your past orders</h1>

{% if not orders %}
  <div class="p-6 rounded border-2 border-dashed text-gray-400 bg-gray-50">
    No past orders yet.
  </div>
{% else %}
  <div class="space-y-4">
    {% for order in orders %}
      <div class="bg-white rounded shadow p-4">
        <div class="flex justify-between items-center">
          <div class="font-semibold">Order #{{ order.id }}</div>
          <div class="text-sm text-gray-600">{{ order.created_at|date:"M j, Y, g:ia" }}</div>
        </div>
        <div class="mt-2 text-sm text-gray-700">
          {% for it in order.items.all %}
            <div class="flex items-center gap-3 py-1">
              {% with pic=it.product.images.first %}
                {% if pic %}
                  <img src="{{ pic.image.url }}" class="w-10 h-10 rounded object-cover" alt="">
                {% endif %}
              {% endwith %}
              <div class="flex-1">
                {{ it.product.name }} â€” {{ it.qty }} {{ it.unit }}
              </div>
              <div>${{ it.line_total|floatformat:"2" }}</div>
            </div>
          {% endfor %}
        </div>
        <div class="mt-3 flex justify-end font-semibold">
          Total: ${{ order.total|floatformat:"2" }}
        </div>
      </div>
    {% endfor %}
  </div>
{% endif %}
{% endblock %}
